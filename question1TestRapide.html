<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
	<title>Question 1 Test Rapide</title>
    <link rel="stylesheet" href="src/css/style.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="src/js/bdd.js"></script>



</head>
<body>
    <div id="canevas">
        <div id="contenu">
        	<!--  

				MENU

        	-->
            <nav id="menu">
                <ul>
                    <li><a href="accueil.html">Accueil</a></li>
                    <li><a href="tableauDeBord.html">Tableau de bord</a></li>
                    <li><a href="instructions.html">Instructions</a></li>
                </ul>
            </nav>
            <!--
			
				Contenu de la page

            -->
			<section class="contenuPageQuestions">
				<h1>Test Rapide</h1>
				<section>
					<h2 id="numQuestion">Question</h2>
					<fieldset>
						<p id="question"></p>
						<ul class="a-form">
							<li><input name="r1" type="radio" id="inp1"><label for="1" id="rep1"></label></li>
							<li><input name="r1" type="radio" id="inp2"><label for="1" id="rep2"></label></li>
							<li><input name="r1" type="radio" id="inp3"><label for="1" id="rep3"></label></li>
							<li><input name="r1" type="radio" id="inp4"><label for="1" id="rep4"></label></li>
						</ul>
					</fieldset>
				
					<a href="tableauDeBord.html" class="bouton">Retour au menu</a>
					<a href="#" class="bouton" id="correction">Corriger</a>
					<a class="bouton" id="questionSuivante" href="#" hidden>Question Suivante</a>
					
				</section>
			</section>
			<!-- 

				Barre de statisitiques 

			-->			
			<aside>
				<h1>Statistiques</h1>
				
				<section>
					<h2>Note cumulative test rapide</h2>
					<p>100%</p>
				</section>
				<section>
					<h2>Note moyenne des examen</h2>
					<p>100%</p>
				</section>
				
				<!-- ajout javascript dans lien -->
				<p></p><a href="#modal-one" class="btn btn-big">Voir détails</a></p>
				

				
			</aside>
		</div>
		<!-- Fin id contenu -->	
		

		<!-- 

			Footer de la page 

		-->
        <div id="piedDePage">
            <footer class="centrerfooter">
                <p>Thomas BILLE</p>
                <p>Garing TANG</p>
            </footer>
        </div>
    <!-- Fin id canevas -->	
    </div>
	
	<!-- Modal -->
	<div class="modal" id="modal-one" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-header">
			  <h2>Résultats détaillés des examens</h2>
			  <a href="#close" class="btn-close" aria-hidden="true">×</a> <!--CHANGED TO "#close"-->
			</div>
			<div class="modal-body">
			  <p>
				<ul>
					<li>Examen 1 (HTML): 20 / 20</li>
					<li>Examen 2 (CSS): 10 / 20</li>
					<li>Examen 3 (HTML): 15 / 20</li>
					<li>Examen 4 (Javascript): 19 / 20</li>
					<li>Examen 5 (HTML): 20 / 20</li>
					<li>Examen 6 (CSS): 10 / 20</li>
					<li>Examen 7 (HTML): 15 / 20</li>
					<li>Examen 8 (Javascript): 19 / 20</li>
					<li>Examen 9 (Javascript): 19 / 20</li>
					<li>Examen 10 (HTML): 20 / 20</li>
				</ul>
			</p>
			</div>
			<div class="modal-footer">
			  <a href="#close" class="btn">Fermer</a>  <!--CHANGED TO "#close"-->
			</div>
		</div>
	</div>
	<!-- /Modal -->


    <script type="text/javascript">
    	// variable qui donne ma question
    	var i;
    	// le tableau des question importé sur la page
    	var monTableauQuestions;

    	$( document ).ready(function() {
			// je récupère toutes les questions en local
			monTableauQuestions = getAllQuestions();

			// Choix d'une question aléatoire
			i=Math.floor(Math.random() * ((monTableauQuestions.length-1) + 1) + 0);

			// affichage de la question
			$("#question").text(monTableauQuestions[i].question);

			// parcours de toutes les réponses + affichage des réponses possibles
			for(var j=0;j<monTableauQuestions[i].reponses.length;j++){
				$("#rep"+(j+1)).text('');
				$("#rep"+(j+1)).text(monTableauQuestions[i].reponses[j]);
			}
			// ici je uncheck tous les boutons radio
			$("input:radio").attr("checked", false);
		});





    	// on click on correction
    	$("#correction").click( function(){
    		if($("input:radio[name='r1']").is(":checked")){ 

    			// Controle si la réponse est bonne ( comparaison avec le text de la répons coché )
				if ( monTableauQuestions[i].reponses[monTableauQuestions[i].bonneReponse -1] == $("input:radio[name='r1']:checked").parent().text() ){
					// ici je met le texte en vert si la réponse est bonne
					$("input:radio[name='r1']:checked").parent().css({
						"background-color": '#aedbae',	
						"padding": '3px 10px',
						"border-radius": '25px',
						"margin-top": '1px',
						"margin-bottom": '1px',
					});
				}
				else{
					// ici je met le texte en vert pour la bonne réponse
					  $("input:radio[name='r1']").each(function(){
					  	if ( monTableauQuestions[i].reponses[monTableauQuestions[i].bonneReponse -1] == $(this).parent().text() ){
	    					// ici je met le texte en vert si la réponse est bonne
							$(this).parent().css({
								"background-color": '#aedbae',
								"padding": '3px 10px',
								"border-radius": '25px',
								"margin-top": '1px',
								"margin-bottom": '1px',
							});
						}
					  });

					// ici je met le texte en rouge si la réponse est mauvaise
					$("input:radio[name='r1']:checked").parent().css({
						"background-color": '#e89f9f',
						"padding": '3px 10px',
						"border-radius": '25px',	
					});
				}
    			

				// je cache le bouton de correction et j'affiche la question suivante
				$("#correction").hide();
				$("#questionSuivante").show();
    		}
			else{
				alert("it's not checked");
			}
    	});


    	// on click on Question Suivante
    	$("#questionSuivante").click( function(){
    		// récuperation d'un numéro aléatoire pour la question
    		i=Math.floor(Math.random() * ((monTableauQuestions.length-1) + 1) + 0);
    		if(i<monTableauQuestions.length){
    			// affichage de la question
    			$("#question").text(monTableauQuestions[i].question);

    			// parcours de toutes les questions + affichage
    			for(var j=0;j<monTableauQuestions[i].reponses.length;j++){
    				$("#rep"+(j+1)).text('');
    				$("#rep"+(j+1)).text(monTableauQuestions[i].reponses[j]);
    			}
    		}

    		// ici j'enlève le style si l'utilisateur a corrigé auparavant
			$("input:radio").attr("checked", false);
			$("input:radio[name='r1']").each(function(){
				$(this).parent().removeAttr('style');
		  	});

		  	$("#correction").show();
			$("#questionSuivante").hide();
    	});

    </script>

</body>
</html>